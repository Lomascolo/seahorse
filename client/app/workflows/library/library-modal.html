<div class="dataframe-library-modal"
     ng-class="{'read-mode' : controller.mode === 'read-file',
                'write-mode': controller.mode === 'write-to-file'}"
>
  <div class="modal-header dataframe-library-modal__header">
    <div class="title">Select Data Frame</div>
    <div class="input">
      <input class="form-control search-field"
             ng-model="controller.filterString"
             placeholder="Search in {{controller.currentDirName}}"
      />
    </div>
  </div>

  <breadcrumbs
    all-parents="controller.parents"
    current-folder="controller.currentDirName"
  ></breadcrumbs>

  <div class="dataframe-library-modal__body">
    <div class="content-wrapper">
      <div class="files-list">
        <div class="dataframe-form">
          <file-upload-section style="flex: 1;"></file-upload-section>
          <recent-files-indicator></recent-files-indicator>
        </div>

        <div ng-if="!controller.filterString">
          <deepsense-loading-spinner-sm ng-if="controller.loading"></deepsense-loading-spinner-sm>

          <div class="file-list-wrapper" custom-scroll-bar>
            <file-list
              items="controller.items"
              parents="controller.parents"
              on-select="controller.onSelect"
            ></file-list>
          </div>

          <div ng-if="controller.message" class="dataframe-info">
            {{controller.message}}
          </div>
        </div>

        <div class="dataframe-list" ng-if="controller.filterString">
          <div class="list-wrapper" custom-scroll-bar>
            <deepsense-loading-spinner-sm ng-if="controller.loading"></deepsense-loading-spinner-sm>

            <div ng-repeat="folder in controller.searchResults" class="folder">
              {{folder.name}}
              <div class="dataframe" ng-repeat="dataframe in folder.items ">
                <div class="dataframe-name"
                     ng-click="controller.selectDataframe(dataframe)"
                     ng-class="{'selectable-dataframe': controller.canChooseDataframe}">
                  <span>{{dataframe.name}}</span>
                </div>
                <div class="actions">
                  <a ng-href={{dataframe.downloadUrl}} download><span class="sa sa-download"></span></a>
                  <span class="sa sa-delete" ng-click="controller.deleteFile(dataframe)"></span>
                </div>
              </div>

              <div ng-if="controller.searchResults.length <= 1 && controller.searchResults[0].items.length < 1"
                   class="dataframe-info">
                There is no search results in this folder.
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="dataframe-library-modal__footer">
    <input
      ng-if="controller.mode === 'write-to-file'"
      ng-model="controller.selectedItem"
      class="file-input"
      type="text"
      placeholder="Name your file"
    >
    <button
      ng-if="controller.mode === 'write-to-file'"
      ng-click="controller.ok()"
      ng-disabled="!controller.selectedItem"
      type="button"
      class="btn btn-blue" >Ok</button>
    <button type="button" class="btn btn-white" ng-click="controller.close()">Close</button>
  </div>
</div>
